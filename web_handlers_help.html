<HTML>
<Head>
    <Title>404 Страница не найдена</Title>
</Head>

<Body>
404 Страница не найдена<br>
<br>
<b>Инструкция:</b>
<br>
Если сервер сообщает 503 (internal error) значит это баг<br>
Далее name - уникальное имя стенда<br>
<br>
1. Просмотр информации о стендах<br>
<br>
Список всех стендов<br>
http://{addr}:{port}/list<br>
<br>
Подробная информация о стендах<br>
http://{addr}:{port}/list?full=1<br>
<br>
Показать только запущеные стенды<br>
http://{addr}:{port}/list?active=1<br>
<br>
Показать только стенды с задачами (обновление, восстановление и т. д.)<br>
http://{addr}:{port}/list?task=1<br>
<br>
Показать только стенды с ошибками<br>
http://{addr}:{port}/list?error=1<br>
<br>
2. Запуск стенда<br>
<br>
Стенд будет отстановлен автоматически через 8 часов<br>
http://{addr}:{port}/stand/name/start<br>
<br>
Запуск стенда на произвольное количество минут (в примере на 15 минут)<br>
http://{addr}:{port}/stand/name/start?duration=15<br>
<br>
3. Остановка стенда<br>
http://{addr}:{port}/stand/name/stop<br>
<br>
4. Переход на порт стенда через редирект<br>
http://{addr}:{port}/stand/name<br>
<br>
5. Собрать сборку на дженкинсе и обновить стенд<br>
<br>
Обновить до последней версии текущего бранча<br>
http://{addr}:{port}/stand/name/update<br>
<br>
Изменить бранч стенда и обновить (стенд поднимется только если бранч будет более новый. Версия как в дженкинсе. При<br>
ошибке в названии будет ошибка обновления)<br>
http://{addr}:{port}/stand/name/update?change_branch=tandem_uni_v_2_10_6_2016_08_15<br>
<br>
Изменить на последний<br>
http://{addr}:{port}/stand/name/update?change_branch=last<br>
<br>
<br>
6. Посмотреть логи стенда<br>
<br>
Последние 150 строк<br>
http://{addr}:{port}/stand/name/log<br>
<br>
Произвольное число строк с конца<br>
http://{addr}:{port}/stand/name/log?tail=500<br>
<br>
Посмотреть за все время (на больших логах может зависнуть)<br>
http://{addr}:{port}/stand/name/log?tail=all<br>
<br>
<br>
7. Создать бэкап стенда<br>
Бэкап стенда в файл по умолчанию (у каждого стенда есть такой файл, и он один, поэтому только для стендов без
ошибок)<br>
http://{addr}:{port}/stand/name/backup<br>
<br>
<br>
Бэкап стенда в файл с специальным именем (будет лежать рядом с остальными бэкапами)<br>
http://{addr}:{port}/stand/name/backup?file=ok_tmp<br>
<br>
<br>
8. Восстановить из резервной копии<br>
<br>
Из копии по умолчанию<br>
http://{addr}:{port}/stand/name/restore<br>
<br>
<br>
Из специального файла копии (должен лежать рядом с остальными бэкапами)<br>
http://{addr}:{port}/stand/name/restore?file=ok_tmp<br>
<br>
<br>
9. Создание копии стенда (база данных восстановится из последней резервной копии)<br>
<br>
Простое создание копии (необходимо указать новое имя, должно быть уникальным)<br>
http://{addr}:{port}/stand/name/clone?new_name=ok_tmp<br>
<br>
Изменение параметров стенда во время копирования<br>
<br>
new_description - новое описание стенда (пробелы и русские символы нельзя, точнее можно но не через браузер)<br>
http://{addr}:{port}/stand/name/clone?new_name=ok_tmp&new_description=delme_later<br>
<br>
new_jenkins_project - подключить к другому джобу в дженкинсе (по умолчанию, сохранить параметры копируемого стенда)<br>
http://{addr}:{port}/stand/name/clone?new_name=ok_tmp&new_jenkins_project=product_uni<br>
<br>
change_branch — подключить к другому бранчу (по умолчанию, сохранить параметры копируемого стенда)<br>
http://{addr}:{port}/stand/name/clone?new_name=ok_tmp&change_branch=last<br>
<br>
do_build — собрать новый билд для копии (по умолчанию не собирает, берет последний доступный)<br>
http://{addr}:{port}/stand/name/clone?new_name=ok_tmp&do_build=1<br>
<br>
do_backup - создать свежий бэкап стенда перед копированием(по умолчанию берет последний бэкап с дефолтным именем)<br>
http://{addr}:{port}/stand/name/clone?new_name=ok_tmp&do_backup=1<br>
<br>
10. POST запрос гибкого создания стенда<br>
http://{addr}:{port}/stand/new_stand_name/add<br>
<br>
В BODY:<br>
db_type — postgres, pgdocker или mssql, обязательный<br>
jenkins_project — название job в jenkins, обязательный<br>
<br>
db_addr — адрес сервера базы данных стенда, по умолчанию берет из конфига<br>
db_port — порт сервера базы данных стенда, по умолчанию берет из конфига<br>
db_name — название базы данных стенда, по умолчанию состоит из префикса из конфига и уникального названия стенда<br>
db_user — пользователь базы данных, по умолчанию берет из конфига<br>
db_pass — пароль пользователя базы данных, по умолчанию берет из конфига<br>
<br>
description -произвольное описание стенда, по умолчанию пусто<br>
branch — использовать более старый бранч, по умолчанию последний транк или бранч<br>
no_validate — флаг отключения валидации entity кодов. Может быть полезно если клиент на релизах, по умолчанию валидации
включены<br>
do_build — собрать новый билд перед созданием стенда, по умолчанию берет последний имеющийся<br>
existed_db — флаг использования существующей базы, по умолчанию упадет если база с таким именем существует<br>
backup_file — восстановить базу из бэкапа. Бэкап должен быть добавлен в соотв. Папку, заданную в конфигах<br>
reduce — флаг, указывающий на то, что необходимо произвести операции по по очистке и уменьшению базы. По умолчанию
отключено<br>
uni_schema - использовать схему uni (только для mssql и баз восстановленных из бэкапа), необходимо указать пользователя
и пароль не имеющего прав system admin на сервере mssql. user и pass в формате json По
умолчанию не используется<br>
<br>
10. POST запрос повторной очиски базы данных стенда<br>
http://{addr}:{port}/stand/new_stand_name/reduce<br>
<br>
</Body>
</HTML>
